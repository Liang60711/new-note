# 安裝
1. 安裝版本 2014 express 64bits。
2. 安裝 SSMS (SQL server management studio)。

# 資料庫備份 還原
## 使用 GUI 備份
* 右鍵資料庫 >> 工作 >> 備份 >> 副檔名為 <code>.bak</code>。

## 使用 GUI 還原
* 右鍵資料庫 >> 還原資料庫 >> 來源(裝置) >> 選取 bak 檔案 >> 確定。

## 使用 卸離 & 附加
* 卸離: 好處是不用將檔案刪除，斷開連接。
* 附加: 將資料庫重新連接。

<br/>

<br/>


# 操作 Database
## Create db
使用腳本建立資料庫(不會自動建立目錄，需手動建立 C:\DATA)
```sql
CREATE DATABASE sales 
ON PRIMARY(
	NAME='sale_dat',
	FILENAME='C:\DATA\saledat.mdf',
	SIZE=10,
	MAXSIZE=50,
	FILEGROWTH=5)
LOG ON(
	NAME='sale_log',
	FILENAME='C:\DATA\salelog.ldf',
	SIZE=5,
	MAXSIZE=25,
	FILEGROWTH=5
);

-- 主文件附檔名 .mdf
-- 日誌附檔名 .ldf
-- SIZE 文件初始值大小，單位 MB；FILEGROWTH 為每次增加的大小。
```

## Alter db
修改 db 名稱
```sql
ALTER DATABASE testdb01
MODIFY NAME=testdb02;
```
修改 db 屬性
```sql
-- 指定 db 中名為 testdb01 檔案，進行屬性修改
ALTER DATABASE testdb02
MODIFY FILE(
	NAME=testdb01
	SIZE=20MB,
	MAXSIZE=80MB,
	FILEGROWTH=10MB
);
```
查看修改是否成功
```sql
EXEC SP_HELPDB TESTDB;
```
## Drop db
刪除 db，需要先變更 連接的資料庫(左上角)，才能刪除。
```
DROP DATABASE testdb02;
```
<br/>

<br/>

# 操作 Table
## 修改 Table 屬性
修改欄位的長度
```SQL
ALTER TABLE person
ALTER COLUMN first_name VARCHAR(150);
```
修改欄位資料類型
```sql
ALTER TABLE person
ALTER COLUMN age BIGINT;
```
修改欄位名稱
```sql
-- '表名.原欄位名', '修改欄位名', 'COLUMN'
EXEC sp_rename 'person.first_name', 'f_name', 'COLUMN';
```
添加新欄位
```sql
-- ADD
ALTER TABLE person
ADD last_name VARCHAR(20) NOT NULL;
```



添加 <code>NOT NULL</code>
```sql
ALTER TABLE person
ALTER COLUMN test_id INT NOT NULL;
```
添加 <code>Primary Key</code>
```sql
ALTER TABLE person
ADD CONSTRAINT test_id PRIMARY kEY(ID);
-- ADD CONSTRAINT <約束名> PRIMARY KEY(欄位名)
```

## 刪除 Table 
```sql
DROP TABLE person
```
<br/>

<br/>

# 與 mySQL 不同的部分
## AUTO_INCREMENT
```sql
-- mySQL
AUTO_INCREMENT

-- T-SQL
-- 從1開始，每次加2
IDENTITY(1,2)
```